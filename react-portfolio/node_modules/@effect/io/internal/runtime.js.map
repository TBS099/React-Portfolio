{"version":3,"file":"runtime.js","names":["Context","_interopRequireWildcard","require","Option","_Pipeable","Exit","Fiber","FiberId","FiberRefs","CausePretty","core","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","_scheduler","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","unsafeFork","runtime","self","options","fiberId","unsafeMake","effect","fiberRefs","updatedAs","fiberRef","currentContext","value","context","scheduler","currentScheduler","updateRefs","fiberRuntime","forkAs","supervisor","none","onStart","unsafeAddObserver","exit","onEnd","globalScope","add","start","exports","unsafeRunCallback","onExit","id","onExitInterrupt","interruptAs","flatten","unsafeRunSync","SyncScheduler","flush","result","unsafePoll","_tag","fiberFailure","i0","asyncFiberException","fiber","limit","Error","stackTraceLimit","error","message","defineProperties","name","toString","NodePrint","isAsyncFiberException","u","FiberFailureId","Symbol","for","FiberFailureCauseId","cause","pretty","prettyErrors","length","split","substring","stack","isFiberFailure","unsafeRunSyncExit","unsafeRunPromise","Promise","resolve","reject","OP_SUCCESS","OP_FAILURE","unsafeRunPromiseExit","RuntimeImpl","constructor","pipe","pipeArguments","arguments","make","flags","withFiberRuntime","state","status","succeed","getFiberRef","unsafeGetFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","RuntimeMetrics","defaultRuntime","empty","Map","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","asyncEffect","register","flatMap","deferredMake","deferred","uninterruptibleMask","restore","zipRight","fork","catchAllCause","cb","intoDeferred","deferredFailCause","deferredAwait"],"sources":["../src/internal/runtime.ts"],"sourcesContent":[null],"mappings":"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"}