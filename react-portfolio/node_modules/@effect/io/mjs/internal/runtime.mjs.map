{"version":3,"file":"runtime.mjs","names":["Context","Option","pipeArguments","Exit","Fiber","FiberId","FiberRefs","CausePretty","core","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","_scheduler","unsafeFork","runtime","self","options","fiberId","unsafeMake","effect","fiberRefs","updatedAs","fiberRef","currentContext","value","context","scheduler","currentScheduler","updateRefs","fiberRuntime","forkAs","supervisor","none","onStart","unsafeAddObserver","exit","onEnd","globalScope","add","start","unsafeRunCallback","onExit","id","onExitInterrupt","interruptAs","flatten","unsafeRunSync","SyncScheduler","flush","result","unsafePoll","_tag","fiberFailure","i0","asyncFiberException","fiber","limit","Error","stackTraceLimit","error","message","Object","defineProperties","name","toString","get","NodePrint","isAsyncFiberException","u","FiberFailureId","Symbol","for","FiberFailureCauseId","cause","pretty","prettyErrors","length","split","substring","stack","isFiberFailure","unsafeRunSyncExit","unsafeRunPromise","Promise","resolve","reject","OP_SUCCESS","OP_FAILURE","unsafeRunPromiseExit","RuntimeImpl","constructor","pipe","arguments","make","flags","withFiberRuntime","state","status","succeed","getFiberRef","unsafeGetFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","RuntimeMetrics","defaultRuntime","empty","Map","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","asyncEffect","register","flatMap","deferredMake","deferred","uninterruptibleMask","restore","zipRight","fork","catchAllCause","cb","intoDeferred","deferredFailCause","deferredAwait"],"sources":["../../src/internal/runtime.ts"],"sourcesContent":[null],"mappings":"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"}